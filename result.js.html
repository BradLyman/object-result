<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: result.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: result.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * This module exposes factory functions for creating result objects
 * representing errors and successes.
 * @module object-result
 **/
'use strict';

/**
 * @class Result
 **/
let Result = {};


Result.prototype = {
  /** @lends Result **/

  /**
   * Retrieves the result's error object.
   * @return {Object} Undefined is returned if this result isn't an error.
   **/
  get_err : function() { return this.err; },

  /**
   * Retrieves the result's ok object.
   * @return {Object} Undefined is returned if this result isn't an ok.
   **/
  get_ok  : function() { return this.ok; },

  /**
   * Returns true when this result is an err.
   * @return {boolean} true if this result represents an error.
   **/
  is_err  : function() { return (this.err !== undefined); },

  /**
   * Returns true when this result is an ok.
   * @return {boolean} true if this result represents an ok.
   **/
  is_ok   : function() { return (this.ok !== undefined); },

  /**
   * Executes the provided function iff this result is not an err.
   * @param {Function} fun - A callback which takes the ok value of
   *                         this result.
   * @return {Object} If fun is executed, then its return is returned
   *                  from and_then -- otherwise "this" is returned.
   **/
  and_then : function(fun) {
    if (this.is_ok()) {
      return fun(this.get_ok());
    }

    return this;
  },

  /**
   * Executes the provided function iff this result is an err.
   * @param {Function} fun - A callback which takes the err value of
   *                         this result.
   * @return {Object} If fun is executed then its return is returned
   *                  from or_else -- otherwise "this" is returned.
   **/
  or_else : function(fun) {
    if (this.is_err()) {
      return fun(this.get_err());
    }

    return this;
  },

  /**
   * Maps an ok value to a new ok value.
   * @param {Function} fun - A callback which accpts the ok value and
   *                         returns a new value to be used in the ok.
   * @return {Result} An ok result with the payload created by the
   *                  provided callback.
   **/
  map : function(fun) {
    if (this.is_ok()) {
      this.ok = fun(this.ok);
    }
    return this;
  },

  /**
   * Maps an err value to a new err value.
   * @param {Function} fun - A callback which accepts the err value and
   *                         returns a new value to be used in the err.
   * @return {Result} An err result with the err created by the provided
   *                  callback.
   **/
  map_err : function(fun) {
    if (this.is_err()) {
      this.err = fun(this.err);
    }
    return this;
  },
};

/**
 * Creates a new result object which represents an error.
 * @param {Object} error - Some object which you use to represent your error.
 * @return {Result} A result representing an error.
 **/
module.exports.createErr = function(error) {
  let result = Object.create(Result.prototype);
  result.err = error;

  return result;
};

/**
 * Creates a new result object which represents a success.
 * @param {Object} ok - Some object which you use to represent your success.
 * @return {Result} A result representing a success.
 **/
module.exports.createOk = function(ok) {
  let result = Object.create(Result.prototype);
  result.ok = ok;

  return result;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-object-result.html">object-result</a></li></ul><h3>Classes</h3><ul><li><a href="module-object-result-Result.html">Result</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Sun Oct 18 2015 20:18:48 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
